(function(t){function e(e){for(var n,r,o=e[0],c=e[1],u=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,o=1;o<i.length;o++){var c=i[o];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},a={app:0},s=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("5530"),a=(i("4de4"),i("d3b7"),i("0643"),i("2382"),i("2b0e")),s=(i("b0c0"),function(){var t=this,e=t._self._c;return e("div",{class:"membership-app "+t.$router.currentRoute.name,attrs:{id:"app"}},[e("router-view",{on:{"go-next":t.goNext}})],1)}),r=[],o=(i("14d9"),i("ac1f"),i("5319"),i("2b27")),c=i.n(o);a["a"].use(c.a);var u={name:"App",computed:{step:function(){return this.$store.state.step}},mounted:function(){var t=window.drupalSettings.openy_memberships_front&&window.drupalSettings.openy_memberships_front.steps?window.drupalSettings.openy_memberships_front.steps:null;t&&this.$store.commit("setSteps",t);var e=this.$store.state.step,i=this.$store.state.steps;i[e]&&(this.$route.name,i[e]),this.$route.name||this.$router.replace({name:i[0]}),null!==this.$cookies.get("home_branch").id&&(this.$store.commit("setLocation",this.$cookies.get("home_branch").id),0==e&&null!==this.$cookies.get("home_branch").id&&this.$store.commit("setStep",1))},data:function(){return{}},methods:{goNext:function(){var t=this.$store.state.steps.indexOf(this.$route.name);-1!==t&&t+1<this.$store.state.steps.length&&this.$store.commit("setStep",t+1)}},watch:{$route:function(t){var e=this.$store.state.step,i=this.$store.state.steps,n=this.$store.state.steps.indexOf(t.name);null!==this.$cookies.get("home_branch").id&&this.$store.state.location&&"BranchSelectorHome"==t.name?(this.$store.commit("setStep",1),this.$router.push({name:i[1]})):-1!=n&&e!=n&&this.$store.commit("setStep",n)},step:function(){var t=this.$store.state.step,e=this.$store.state.steps;e[t]&&this.$route.name!=e[t]&&this.$router.push({name:e[t]})}}},l=u,d=i("2877"),p=Object(d["a"])(l,s,r,!1,null,null,null),m=p.exports,h=i("2f62"),v=i("8c4f"),f=i("bfa9"),_=i("6612"),b=i.n(_),g=i("3b0c"),y=i("bee2"),j=i("d4ec"),C=i("ade3"),w=(i("e9c4"),i("b64b"),Object(y["a"])((function t(){var e=this;Object(j["a"])(this,t),Object(C["a"])(this,"init",(function(){var t=window.localStorage.getItem("openy_membership_version");t||(t="0");var i=window.localStorage.getItem("memberships");switch(t){case"0":window.localStorage.removeItem("memberships"),e.setVersion("1");break;case"1":i=JSON.parse(i),i&&i.family&&(i.family={},window.localStorage.setItem("memberships",JSON.stringify(i))),e.setVersion("1.0.1");break}})),Object(C["a"])(this,"setVersion",(function(t){window.localStorage.setItem("openy_membership_version",t),e.init()}))}))),O=new w;a["a"].filter("numFormat",Object(g["a"])(b.a)),a["a"].use(v["a"]),a["a"].use(h["a"]);var x={init:function(t,e){O.init();var i=new f["a"]({key:"memberships",storage:window.localStorage});t=Object(n["a"])(Object(n["a"])({},t),{},{plugins:[i.plugin]});var s=new v["a"]({mode:"hash",base:"/",routes:e}),r=new h["a"].Store(t);new a["a"]({store:r,router:s,render:function(t){return t(m)}}).$mount("#app")}},k=function(){var t=this,e=t._self._c;return e("section",{staticClass:"app-container"},[e("h1",{staticClass:"title"},[t._v(" Membership Builder ")]),e("div",{staticClass:"description"},[e("div",{staticClass:"description-text"},[t._v(" Select your preferred YMCA branch. ")]),e("div",{staticClass:"text-align-right"},[e("a",{staticClass:"view-loactions",attrs:{href:"/locations"}},[t._v("View Locations "),e("ViewLocationIcon")],1)])]),e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("locations",{attrs:{locations:t.locations}})],1),t.$store.state.location?e("div",{staticClass:"navigation"},[e("div",{staticClass:"container"},[e("button",{staticClass:"btn btn-next",on:{click:function(e){return t.$emit("go-next")}}},[t._v("Next")])])]):t._e()])},T=[],S=(i("d81d"),i("a573"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"locations"},[this.allBranchesBtnEnabled?e("location",{staticClass:"location-wrapper",attrs:{value:t.loc,val:"all",name:"- All branches -"},on:{input:t.updateLocation}}):t._e(),t._l(t.locations,(function(i,n){return e("location",{key:n,staticClass:"location-wrapper",attrs:{value:t.loc,val:i.value,name:i.name,address:i.address},on:{input:t.updateLocation}})}))],2)}),$=[],L=function(){var t=this,e=t._self._c;return e("div",[e("div",{class:"location "+(t.val==t.value?"active":""),on:{click:t.updateValue}},[e("div",{staticClass:"radio-wrap"},[e("div",{class:"radio "+(t.val==t.value?"active":"")})]),e("div",{staticClass:"content"},[e("div",{staticClass:"name",domProps:{textContent:t._s(t.name)}}),e("div",{staticClass:"address",domProps:{textContent:t._s(t.address)}})])])])},N=[],P={props:["name","address","val","value"],methods:{updateValue:function(){this.$emit("input",this.val)}}},F=P,E=Object(d["a"])(F,L,N,!1,null,null,null),Q=E.exports,M={props:["locations"],computed:Object(h["b"])({loc:function(t){return t.location}}),components:{Location:Q},data:function(){return{value:null,allBranchesBtnEnabled:0}},methods:{updateLocation:function(t){this.value=t,this.$store.commit("setLocation",this.value)}},mounted:function(){this.allBranchesBtnEnabled=window.drupalSettings.openy_memberships_front&&window.drupalSettings.openy_memberships_front.all_branches_btn?window.drupalSettings.openy_memberships_front.all_branches_btn:0}},B=M,I=Object(d["a"])(B,S,$,!1,null,null,null),A=I.exports,R=i("18fa"),H=i.n(R),V=(i("e40d"),{functional:!0,render(t,e){const{_c:i,_v:n,data:a,children:s=[]}=e,{class:r,staticClass:o,style:c,staticStyle:u,attrs:l={},...d}=a;return i("svg",{class:[r,o],style:[{width:"24px",height:"24px"},c,u],attrs:Object.assign({style:"width:24px;height:24px",viewBox:"0 0 24 24"},l),...d},s.concat([i("path",{attrs:{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"}})]))}}),D={mounted:function(){var t=this;this.isLoading=!0,window.jQuery.ajax({url:"/jsonapi/node/branch",dataType:"json"}).then((function(e){t.isLoading=!1,t.locations=Object.keys(e.data).map((function(t){var i=e.data[t].attributes;return{name:i.title,address:i.field_location_address.locality+", "+i.field_location_address.administrative_area,value:i.drupal_internal__nid}}))})).catch((function(){t.isLoading=!1}))},methods:{next:function(){this.$router.push({path:"/memberships/summary"})}},components:{Locations:A,Loading:H.a,ViewLocationIcon:V},data:function(){return{isLoading:!1,tab:null,zip:null,items:[{tab:"zip"},{tab:"manual"}],locations:[]}}},X=D,J=Object(d["a"])(X,k,T,!1,null,null,null),q=J.exports,G=function(){var t=this,e=t._self._c;return e("section",{staticClass:"app-container summary-wrapper"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("h1",{staticClass:"title"},[t._v("Your Membership")]),t._m(0),e("div",{staticClass:"product"},[e("div",{staticClass:"product-title"},[e("h2",[t._v(t._s(t.product.title))])]),e("div",{staticClass:"product-description"},[e("p",{domProps:{innerHTML:t._s(t.product.field_description)}})]),e("div",{staticClass:"product-columns"},[e("div",[e("div",{staticClass:"title"},[t._v("Purchase Options")]),e("div",{staticClass:"options"},[e("div",{staticClass:"branch"},[t._v(" "+t._s(t.product.branch&&t.product.branch.title)+" "+t._s(null===t.product.branch&&"All branches")+" ")]),e("v-select",{attrs:{reduce:function(t){return t.value},clearable:!1,searchable:!1,value:t.variant,options:t.variants},on:{input:t.updateProduct}}),1==t.product.variations[t.variant].field_best_value?e("div",{staticClass:"best-value"},[t._v("Best value")]):t._e()],1)]),t._e(),e("div",[e("div",{staticClass:"title"},[t._v("Cost Summary")]),e("div",{staticClass:"options"},[e("div",{staticClass:"item"},[t._m(2),e("div",{staticClass:"option-price text-align-right"},[e("b",[t._v("$"+t._s(t._f("numFormat")(t.total_price,"0.00"))+" / mo")])])])])])]),e("div",[e("a",{staticClass:"select",on:{click:function(e){return t.$emit("go-next")}}},[t._v("JOIN NOW")])])])],1)},U=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"description"},[e("div",{staticClass:"description-text"},[t._v("Here's a summary of your membership. Keep scrolling to take the next step!")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"info"},[e("p",[e("i",[t._v("* Proof of eligibility will be required.")])]),e("p",[e("i",[t._v("â€  Member must work out at least 12 times per month to claim discount.")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-title"},[e("b",[t._v("Dues")])])}],Y=(i("a15b"),i("13d5"),i("3ca3"),i("9d4a"),i("ddb0"),i("4a7a")),K=i.n(Y),z=Object(y["a"])((function t(){var e=this;Object(j["a"])(this,t),Object(C["a"])(this,"token",null),Object(C["a"])(this,"getToken",(function(t){return e.token&&!t?new Promise((function(t){t(e.token)})):window.jQuery.ajax({url:"/session/token"}).then((function(t){return e.token=t,t}))})),Object(C["a"])(this,"getUserInfo",(function(){return e.getToken().then((function(t){return window.jQuery.ajax({url:"/jsonapi",dataType:"json",headers:{"X-CSRF-Token":t}})}))}))})),W=new z,Z=Object(y["a"])((function t(){Object(j["a"])(this,t),Object(C["a"])(this,"getOrder",(function(t){return W.getToken().then((function(e){return window.jQuery.ajax({url:"/jsonapi/commerce_order/membership_order/"+t,dataType:"json",headers:{"X-CSRF-Token":e}})}))})),Object(C["a"])(this,"getCart",(function(){return W.getToken().then((function(t){return window.jQuery.ajax({url:"/cart?_format=json",dataType:"json",type:"GET",headers:{"X-CSRF-Token":t}})}))})),Object(C["a"])(this,"setBilling",(function(t,e){return W.getToken().then((function(i){return window.jQuery.ajax({url:"/memberships/api/billing/"+t,contentType:"application/vnd.api+json",type:"POST",dataType:"json",headers:{"X-CSRF-Token":i},data:JSON.stringify({field_email:e.email,field_phone:e.phone,address:{country_code:"US",address_line1:"",locality:"",administrative_area:"",postal_code:"",given_name:e.firstName,family_name:e.lastName}})})}))})),Object(C["a"])(this,"createMember",(function(t){return W.getToken().then((function(e){return window.jQuery.ajax({url:"/jsonapi/profile/family_members",contentType:"application/vnd.api+json",type:"POST",dataType:"json",headers:{"X-CSRF-Token":e},data:JSON.stringify({data:{type:"profile--family_members",attributes:{field_first_name:t.name},relationships:{field_age_group:{data:{type:"taxonomy_term--memberships_ages_groups",id:t.type_uuid}}}}})})}))})),Object(C["a"])(this,"createOrder",(function(t){return W.getToken().then((function(e){return window.jQuery.ajax({url:"/cart/add?_format=json",contentType:"application/json",dataType:"json",type:"POST",headers:{"X-CSRF-Token":e},data:JSON.stringify([{purchased_entity_type:"commerce_product_variation",purchased_entity_id:t,quantity:"1"}])})}))})),Object(C["a"])(this,"removeMembers",(function(t){return W.getToken().then((function(e){var i=t.map((function(t){return window.jQuery.ajax({url:"/jsonapi/profile/family_members/"+t.id,dataType:"json",type:"DELETE",headers:{"X-CSRF-Token":e}})}));return Promise.all(i)}))})),Object(C["a"])(this,"removeItem",(function(t,e){return W.getToken().then((function(i){return window.jQuery.ajax({url:"/cart/"+t+"/items/"+e,dataType:"json",type:"DELETE",headers:{"X-CSRF-Token":i}})}))})),Object(C["a"])(this,"removeOrder",(function(t){return W.getToken().then((function(e){var i=t.attributes.drupal_internal__order_id;return window.jQuery.ajax({url:"/cart/"+i+"/items",dataType:"json",type:"DELETE",headers:{"X-CSRF-Token":e}})}))})),Object(C["a"])(this,"getAddons",(function(t){return W.getToken().then((function(e){return window.jQuery.ajax({url:"/jsonapi/commerce_product/membership/"+t+"?include=field_om_addons",dataType:"json",type:"GET",headers:{"X-CSRF-Token":e}})}))})),Object(C["a"])(this,"addAddon",(function(t){return W.getToken().then((function(e){return window.jQuery.ajax({url:"/cart/add?_format=json",contentType:"application/json",dataType:"json",type:"POST",headers:{"X-CSRF-Token":e},data:JSON.stringify([{purchased_entity_type:"commerce_addon",purchased_entity_id:t.attributes.drupal_internal__addon_id,quantity:"1",combine:!1}])})}))})),Object(C["a"])(this,"removeAddon",(function(t){return W.getToken().then((function(e){return window.jQuery.ajax({url:"/cart/"+t.order_id+"/items/"+t.order_item_id+"?_format=json",dataType:"json",type:"DELETE",headers:{"X-CSRF-Token":e}})}))})),Object(C["a"])(this,"getMembers",(function(t){return W.getToken().then((function(e){return window.jQuery.ajax({url:"/jsonapi/commerce_order/membership_order/"+t+"?include=field_family",contentType:"application/vnd.api+json",type:"GET",dataType:"json",headers:{"X-CSRF-Token":e}})}))})),Object(C["a"])(this,"setMembers",(function(t,e){return W.getToken().then((function(i){return window.jQuery.ajax({url:"/jsonapi/commerce_order/membership_order/"+t,contentType:"application/vnd.api+json",type:"PATCH",dataType:"json",headers:{"X-CSRF-Token":i},data:JSON.stringify({data:{type:"commerce_order--membership_order",id:t,relationships:{field_family:{data:e}}}})})}))})),Object(C["a"])(this,"updateOrderStatus",(function(t){return W.getToken().then((function(e){return window.jQuery.ajax({url:"/jsonapi/commerce_order/membership_order/"+t,contentType:"application/vnd.api+json",type:"PATCH",dataType:"json",headers:{"X-CSRF-Token":e},data:JSON.stringify({data:{type:"commerce_order--membership_order",id:t,attributes:{cart:!1}}})})}))})),Object(C["a"])(this,"getSummary",(function(){return window.jQuery.ajax({url:"/memberships/api/summary",dataType:"json",data:{}})})),Object(C["a"])(this,"getAgeGroups",(function(){return window.jQuery.ajax({url:"/memberships/get/ages/groups",dataType:"json",data:{}})})),Object(C["a"])(this,"sendSummaryEmails",(function(t){return window.jQuery.ajax({url:"/memberships/send/summary/email/"+t,dataType:"json",data:{}})}))})),tt=new Z,et={computed:{product:function(){return this.$store.state.product},variant:function(){return this.$store.state.product.variant},variants:function(){return this.$store.state.product?this.$store.state.product.variations.map((function(t,e){return{label:t.title,value:e}})):[]}},data:function(){return{discounts:[],addons:[],isLoading:!1,total_price:0,currency:"USD"}},mounted:function(){var t=this;this.isLoading=!0,tt.getCart().then((function(e){if("undefined"==typeof e[0]){var i=t.$store.state.product.variant,n=t.$store.state.product.variations[i];tt.createOrder(n.id).then((function(){tt.getCart().then((function(){tt.getSummary().then((function(e){t.discounts=e.discounts.filter((function(t){return null!=t.title})),t.addons=e.addons,t.total_price=e.total_price,t.currency=e.currency,t.isLoading=!1}))}))}))}else tt.getSummary().then((function(e){t.discounts=e.discounts.filter((function(t){return null!=t.title})),t.addons=e.addons,t.total_price=e.total_price,t.currency=e.currency,t.isLoading=!1}))})).catch((function(){t.isLoading=!1}))},components:{Loading:H.a,vSelect:K.a},methods:{goToDiscount:function(){this.$router.push({name:"DiscountFinder"})},updateProduct:function(t){var e=this,i=t;this.isLoading=!0,tt.getCart().then((function(t){if(t[0]){var n=t[0].order_id;return tt.createOrder(e.product.variations[i].id).then((function(){var e=t[0].order_items.filter((function(t){return"membership"==t.purchased_entity.type}));return!e.length||tt.removeItem(n,e[0].order_item_id)}))}})).then((function(){return tt.getSummary()})).then((function(t){e.discounts=t.discounts.filter((function(t){return null!=t.title})),e.$store.commit("setProduct",Object(n["a"])(Object(n["a"])({},e.product),{},{variant:i})),e.addons=t.addons,e.total_price=t.total_price,e.currency=t.currency,e.isLoading=!1})).catch((function(){e.isLoading=!1}))},clearAddons:function(){var t=this;this.isLoading=!0,tt.getCart().then((function(t){if(t[0]){var e=t[0].order_id,i=t[0].order_items.filter((function(t){return t&&t.purchased_entity&&"membership"!=t.purchased_entity.type}));return Promise.all(i.map((function(t){return tt.removeItem(e,t.order_item_id)})))}return[]})).then((function(){return t.checkDiscounts()})).then((function(){return tt.getSummary()})).then((function(e){t.discounts=e.discounts.filter((function(t){return null!=t.title})),t.addons=e.addons,t.total_price=e.total_price,t.currency=e.currency,t.isLoading=!1})).catch((function(){t.isLoading=!1}))},checkDiscounts:function(){var t=this.$store.state.members.map((function(){return[0,0]}));this.$store.commit("setItem",{key:"members",value:t});var e=t.reduce((function(t,e){return""!=t&&(t+="_"),t+e.map((function(t){return+t})).join(",")}),""),i=0;return this.$store.commit("setItem",{key:"income",value:i}),window.jQuery.ajax({url:"/memberships/check/discounts/"+i+"/"+e,type:"GET",dataType:"json",data:{}})}}},it=et,nt=Object(d["a"])(it,G,U,!1,null,null,null),at=nt.exports,st=function(){var t=this,e=t._self._c;return e("section",{staticClass:"app-container"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("h1",{staticClass:"title"},[t._v(" Membership Builder ")]),t._m(0),e("div",{staticClass:"family-wrapper"},t._l(t.age_groups,(function(i,n){return e("div",{key:n,staticClass:"label-row"},[e("div",{staticClass:"label"},[t._v(t._s(i.title))]),e("div",{staticClass:"value"},[e("integer-minus-plus",{attrs:{value:t.$store.state.family[i.uuid].count},on:{input:function(e){return t.updateFamily(i.uuid,e)}}})],1)])})),0),t.totalCount?e("div",{staticClass:"navigation"},[e("div",{staticClass:"container"},[e("button",{staticClass:"btn btn-next",on:{click:function(e){return t.$emit("go-next")}}},[t._v("Next")])])]):t._e()],1)},rt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"description"},[e("div",{staticClass:"description-text"},[t._v(" How many people will be included in your membership? ")])])}],ot=(i("4e3e"),i("159b"),function(){var t=this,e=t._self._c;return e("span",[e("integer-plusminus",{attrs:{min:t.ips_min,max:t.ips_max,step:t.ips_step,vertical:t.ips_vertical,disabled:t.ips_disabled},on:{input:function(e){return t.$emit("input",e)}},model:{value:t.ips_value,callback:function(e){t.ips_value=e},expression:"ips_value"}})],1)}),ct=[],ut=i("604d"),lt={props:["min","max","step","vertical","disabled","value"],data:function(){return{ips_min:this.min||0,ips_max:this.max||10,ips_step:this.step||1,ips_vertical:this.vertical||!1,ips_disabled:this.disable||!1,ips_value:this.value||0}},components:{IntegerPlusminus:ut["a"]}},dt=lt,pt=Object(d["a"])(dt,ot,ct,!1,null,null,null),mt=pt.exports,ht={mounted:function(){var t=this;this.isLoading=!0,this.totalCount=this.totalCountCalc(),tt.getAgeGroups().then((function(e){var i={};t.age_groups=Object.keys(e).map((function(n){return i[e[n].uuid]=!0,t.$store.commit("setFamilyTerm",{key:e[n].uuid,value:n}),{key:n,title:e[n].title,uuid:e[n].uuid}})),Object.keys(t.$store.state.family).forEach((function(e){i[e]||t.$store.commit("deleteFamilyKey",e)})),t.isLoading=!1})).catch((function(){t.isLoading=!1}))},computed:{family:function(){return this.$store.state.family}},components:{IntegerMinusPlus:mt,Loading:H.a},data:function(){return{isLoading:!1,age_groups:[],totalCount:0}},methods:{updateFamily:function(t,e){this.$store.commit("setFamily",{key:t,value:e}),this.totalCount=this.totalCountCalc()},totalCountCalc:function(){var t=this,e=0;return Object.keys(this.$store.state.family).forEach((function(i){e+=t.$store.state.family[i].count})),e}}},vt=ht,ft=Object(d["a"])(vt,st,rt,!1,null,null,null),_t=ft.exports,bt=function(){var t=this,e=t._self._c;return e("section",{staticClass:"app-container"},[e("h1",{staticClass:"title"},[t._v(" Membership Builder ")]),t._m(0),e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),this.products.length?e("products",{attrs:{products:t.products},on:{"go-next":function(e){return t.$emit("go-next")}}}):t._e(),this.products.length?t._e():e("div",[t._v(" No suitable products was found. ")])],1)])},gt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"description"},[e("div",{staticClass:"description-text"},[t._v(" Check out these great options! ")])])}],yt=function(){var t=this,e=t._self._c;return e("div",t._l(t.products,(function(i,n){return e("product",{key:n,attrs:{product:i},on:{"go-next":function(e){return t.$emit("go-next")}}})})),1)},jt=[],Ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product"},[e("div",{staticClass:"product-title"},[e("h2",[t._v(t._s(t.product.title))])]),e("div",{staticClass:"product-description",domProps:{innerHTML:t._s(t.product.field_description)}}),e("div",{staticClass:"product-columns"},[this.product.variations.length>1?e("div",[e("div",{staticClass:"title"},[t._v("Purchase Options")]),e("div",{staticClass:"options"},[e("div",{staticClass:"branch"},[t._v(" "+t._s(t.product.branch&&t.product.branch.title)+" "+t._s(null===t.product.branch&&"All branches")+" ")]),e("v-select",{attrs:{reduce:function(t){return t.value},clearable:!1,searchable:!1,options:t.variants},model:{value:t.variant,callback:function(e){t.variant=e},expression:"variant"}}),1==t.product.variations[t.variant].field_best_value?e("div",{staticClass:"best-value"},[t._v("Best value")]):t._e()],1)]):t._e(),e("div",[e("div",{staticClass:"title"},[t._v("Cost Summary")]),e("div",{staticClass:"options"},[e("div",{staticClass:"item"},[t._m(0),e("div",{staticClass:"price-value text-align-right"},[e("b",[t._v("$"+t._s(t._f("numFormat")(t.price,"0.00"))+" / "+t._s(t.duration))])])])])])]),e("a",{staticClass:"select",on:{click:t.selectProduct}},[t._v(" SELECT ")])])},wt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"price-title"},[e("b",[t._v("Dues")])])}],Ot={props:["product","includes"],data:function(){return{variant:0}},computed:{variants:function(){return this.product?this.product.variations.map((function(t,e){return{label:t.title,value:e}})):[]},price:function(){var t=this.product.variations&&this.product.variations[this.variant]?this.product.variations[this.variant].price:"NaN";return t},duration:function(){var t=this.product.variations&&this.product.variations[this.variant]&&"Annually"===this.product.variations[this.variant].title?"a":"mo";return t}},methods:{updateValue:function(){this.$emit("input",this.val)},selectProduct:function(){this.$store.commit("setProduct",Object(n["a"])(Object(n["a"])({},this.product),{},{variant:this.variant})),this.$store.commit("setItem",{key:"keepCart",value:!1}),this.$emit("go-next")}},components:{vSelect:K.a}},xt=Ot,kt=Object(d["a"])(xt,Ct,wt,!1,null,null,null),Tt=kt.exports,St={props:["products"],components:{Product:Tt}},$t=St,Lt=Object(d["a"])($t,yt,jt,!1,null,null,null),Nt=Lt.exports,Pt={mounted:function(){var t=this;this.isLoading=!0;var e=this.$store.state.family,i="";for(var n in e){var a=e[n].count,s=e[n].term_id;i+=s+"_"+a+";"}window.jQuery.ajax({url:"/memberships/api/products/"+(this.$store.state.location?this.$store.state.location:"")+"/"+i,dataType:"json",data:{}}).then((function(e){t.isLoading=!1,t.products=Object.keys(e).map((function(t){return e[t]}))})).catch((function(){t.isLoading=!1}))},components:{Loading:H.a,Products:Nt},data:function(){return{isLoading:!1,products:[]}}},Ft=Pt,Et=Object(d["a"])(Ft,bt,gt,!1,null,null,null),Qt=Et.exports,Mt=function(){var t=this,e=t._self._c;return e("section",{staticClass:"app-container"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("h1",{staticClass:"title"},[t._v(" Join Now ")]),t._m(0),e("div",{staticClass:"billing"},[e("div",{staticClass:"billing-wrapper"},[e("div",{staticClass:"field required",class:{error:t.errors.firstName}},[e("label",{attrs:{for:""}},[t._v("First Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.billing.firstName,expression:"billing.firstName"}],domProps:{value:t.billing.firstName},on:{input:function(e){e.target.composing||t.$set(t.billing,"firstName",e.target.value)}}}),e("span",{staticClass:"error"},[t._v("Enter valid First Name")])]),e("div",{staticClass:"field required",class:{error:t.errors.lastName}},[e("label",{attrs:{for:""}},[t._v("Last Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.billing.lastName,expression:"billing.lastName"}],domProps:{value:t.billing.lastName},on:{input:function(e){e.target.composing||t.$set(t.billing,"lastName",e.target.value)}}}),e("span",{staticClass:"error"},[t._v("Enter valid Last Name")])]),e("div",{staticClass:"field required",class:{error:t.errors.email}},[e("label",{attrs:{for:""}},[t._v("Email Address")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.billing.email,expression:"billing.email"}],domProps:{value:t.billing.email},on:{input:function(e){e.target.composing||t.$set(t.billing,"email",e.target.value)}}}),e("span",{staticClass:"error"},[t._v("Enter valid email")])]),e("div",{staticClass:"field required",class:{error:t.errors.phone}},[e("label",{attrs:{for:""}},[t._v("Phone Number")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.billing.phone,expression:"billing.phone"}],domProps:{value:t.billing.phone},on:{input:function(e){e.target.composing||t.$set(t.billing,"phone",e.target.value)}}}),e("span",{staticClass:"error"},[t._v("Enter valid phone")])])])]),t.valid?e("div",{staticClass:"navigation"},[e("div",{staticClass:"container"},[e("button",{staticClass:"btn btn-next",on:{click:t.submit}},[t._v("Next")])])]):t._e()],1)},Bt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"description"},[e("div",{staticClass:"description-text"},[t._v(" Fill out the form below and membership advisor will contact you within 24-hours. ")])])}],It=(i("466d"),{computed:{valid:function(){return this.billing.firstName.length&&this.billing.lastName.length&&this.billing.email.length&&this.billing.phone.length}},data:function(){return{billing:{firstName:"",lastName:"",email:"",phone:""},errors:{firstName:!1,lastName:!1,email:!1,phone:!1},validateFlag:!1,token:null,isLoading:!1}},mounted:function(){},components:{Loading:H.a},methods:{setBilling:function(t){return tt.setBilling(t,this.billing)},validate:function(){if(!this.validateFlag)return!0;var t=/\S+@\S+\.\S+/;this.errors={firstName:!1,lastName:!1,email:!1,phone:!1},""==this.billing.firstName&&(this.errors.firstName=!0),""==this.billing.lastName&&(this.errors.lastName=!0),this.billing.email.match(t)||(this.errors.email=!0),""==this.billing.phone&&(this.errors.email=!0)},submit:function(){var t=this;this.validateFlag=!0,this.validate();var e=Object.keys(this.errors).filter((function(e){return 1==t.errors[e]}));if(0==e.length){var i=[tt.getCart(),W.getUserInfo()];this.isLoading=!0,Promise.all(i).then((function(e){var i=e[0];return t.setBilling(i[0].order_id)})).then((function(){t.$emit("go-next"),t.isLoading=!1})).catch((function(){t.isLoading=!1}))}}},watch:{billing:{deep:!0,handler:function(){this.validate(),this.$store.commit("setItem",{key:"billing",value:this.billing})}}}}),At=It,Rt=Object(d["a"])(At,Mt,Bt,!1,null,null,null),Ht=Rt.exports,Vt=function(){var t=this,e=t._self._c;return e("section",{staticClass:"app-container success-wrapper"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("h1",{staticClass:"title"},[t._v(" Thank You ")]),t._m(0),e("div",{staticClass:"print-wrapper"},[e("a",{attrs:{href:"/memberships/get-summary-pdf/"+this.order_uuid}},[e("i",{staticClass:"fa fa-print"}),t._v(" Print")])]),e("div",{staticClass:"product"},[e("div",{staticClass:"product-title"},[e("h2",[t._v(t._s(t.product.title))])]),e("div",{staticClass:"product-description"},[e("p",{domProps:{innerHTML:t._s(t.product.field_description)}})]),e("div",{staticClass:"product-columns"},[e("div",[e("div",{staticClass:"title"},[t._v("Purchase Options")]),e("div",{staticClass:"options"},[e("div",{staticClass:"branch"},[t._v(" "+t._s(t.product.branch&&t.product.branch.title)+" "+t._s(null===t.product.branch&&"All branches")+" ")]),1==t.product.variations[t.variant].field_best_value?e("div",{staticClass:"best-value"},[t._v("Best value")]):t._e()])]),t._e(),e("div",[e("div",{staticClass:"title"},[t._v("Cost Summary")]),e("div",{staticClass:"options"},[e("div",{staticClass:"product-columns"},[t._m(2),e("div",{staticClass:"price-value text-align-right"},[e("b",[t._v("$"+t._s(t._f("numFormat")(t.total_price,"0.00"))+" / mo")])])])])])])])],1)},Dt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"description"},[e("div",{staticClass:"description-text"},[e("p",[e("b",[t._v("Your membership request has been received!")])]),e("p",[t._v("One of our membership advisors will contact you within 24-hours to schedule a visit, confirm details, and issue your membership card.")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"find-more-wrapper"},[e("div",{staticClass:"info"},[e("p",[e("i",[t._v("* Proof of eligibility will be required.")])]),e("p",[e("i",[t._v("â€  Member must work out at least 12 times per month to claim discount.")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"price-title"},[e("b",[t._v("Dues")])])}],Xt={computed:{product:function(){return this.$store.state.product},variant:function(){return this.$store.state.product.variant},variants:function(){return this.$store.state.product.variants}},data:function(){return{discounts:[],addons:[],isLoading:!1,total_price:0,currency:"USD",order_uuid:""}},mounted:function(){var t=this;this.isLoading=!0,window.jQuery.ajax({url:"/memberships/api/summary",dataType:"json",data:{}}).then((function(e){t.discounts=e.discounts.filter((function(t){return null!=t.title})),t.addons=e.addons,t.total_price=e.total_price,t.currency=e.currency})).then((function(){return tt.getCart()})).then((function(t){return tt.sendSummaryEmails(t[0].uuid).then((function(){return t}))})).then((function(e){return tt.updateOrderStatus(e[0].uuid).then((function(){t.$store.dispatch("clearStorage"),t.isLoading=!1,t.order_uuid=e[0].uuid}))})).catch((function(){t.isLoading=!1,t.$store.commit("setStep",0)}))},components:{Loading:H.a},methods:{goToDiscount:function(){this.$router.push({name:"DiscountFinder"})}}},Jt=Xt,qt=Object(d["a"])(Jt,Vt,Dt,!1,null,null,null),Gt=qt.exports,Ut=[{path:"/branch-selector",name:"BranchSelectorHome",component:q},{path:"/family",name:"Family",component:_t},{path:"/summary",name:"Summary",component:at},{path:"/results",name:"Results",component:Qt},{path:"/join",name:"JoinNow",component:Ht},{path:"/thankyou",name:"Success",component:Gt}],Yt={setSteps:function(t,e){t.steps=e},setStep:function(t,e){t.step=e},setLocation:function(t,e){t.location=e},setFamily:function(t,e){t.family[e.key].count=e.value;var i=0;Object.keys(t.family).forEach((function(e){i+=t.family[e].count})),t.familyTotalCount=i},setFamilyTerm:function(t,e){t.family[e.key]&&t.family[e.key].count||(t.family[e.key]={count:0}),t.family[e.key].term_id=e.value},deleteFamilyKey:function(t,e){this._vm.$delete(t.family,e)},setProduct:function(t,e){t.product=e},setItem:function(t,e){t[e.key]=e.value},clearStorage:function(t){t.family={adults:0,youth:0,seniors:0},t.familyTotalCount=0,t.location=null,t.keepCart=!1,t.members=[],t.income=0,t.billing={}}},Kt={clearStorage:function(t){t.commit("clearStorage")}},zt=["BranchSelectorHome","Family","Results","Summary"],Wt={state:{step:0,steps:zt,location:null,family:{},familyTotalCount:0,product:null,keepCart:!0,members:[],income:0,billing:{}},mutations:Yt,actions:Kt};x.init(Wt,Ut)}});